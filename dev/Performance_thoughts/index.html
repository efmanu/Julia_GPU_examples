<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Warps and Branching · Julia_GPU_examples.</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Julia_GPU_examples.</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><span class="toctext">Getting Started</span><ul><li><a class="toctext" href="../GPU_background/">Some Background on GPUs</a></li><li><a class="toctext" href="../Accessing_GPUs/">Accessing GPUs</a></li><li><a class="toctext" href="../Setup_Julia/">Set-up Julia</a></li></ul></li><li><span class="toctext">Developing With GPUs</span><ul><li><a class="toctext" href="../Vector_addition/">An Introduction to Parallelism</a></li><li><a class="toctext" href="../Vector_dot_product/">Shared Memory and Synchronisation</a></li><li><a class="toctext" href="../Streaming/">Streaming</a></li><li><a class="toctext" href="../Challenges/">Challenges in Julia GPU Software Development</a></li></ul></li><li><span class="toctext">Performance</span><ul><li><a class="toctext" href="../Profiling/">Profiling</a></li><li class="current"><a class="toctext" href>Warps and Branching</a><ul class="internal"></ul></li></ul></li><li><a class="toctext" href="../Further_Reading/">Further Reading</a></li><li><a class="toctext" href="../About_the_author/">About the Author</a></li></ul></nav><article id="docs"><header><nav><ul><li>Performance</li><li><a href>Warps and Branching</a></li></ul><a class="edit-page" href="github.com/jenni-westoby/Julia_GPU_examples.git"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Warps and Branching</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Warps-and-Branching-1" href="#Warps-and-Branching-1">Warps and Branching</a></h1><p>Based on your reading of this tutorial so far, you could be forgiven for thinking that all threads execute entirely independently of each other. In fact, this is not the case. In CUDA architecture, threads are split into groups of 32. Each group of 32 threads executes in &#39;lockstep&#39; with each other. So in other words, for each line of your program, each thread in a group of 32 is executing the same instruction but for different data. A group of 32 threads that execute in lockstep is referred to as a &#39;warp&#39;.</p><p>Warps can have some important performance implications. For example, consider the pseudocode if/else statement below:</p><pre><code class="language-none">if condition1
  do thing1
else
  do thing2
end</code></pre><p>Because all of the threads in a warp execute in lockstep, if <code>condition1</code> is only true for even just one thread in the warp, all of the threads in that warp must wait until that thread has executed <code>do thing1</code>. Then, the thread for which <code>condition1</code> was true for must wait for all of the other threads to execute the <code>else</code> condition and <code>do thing2</code>. Finally, all the threads can move on to the next line of code beyond the if/else statement.</p><p>This if/else statement is an example of &#39;branching&#39; code and contains two branches - a branch corresponding to <code>thing1</code> and a branch for <code>thing2</code>.This example illustrates that branching can potentially substantially slow down your code, as all of the threads in our warp had to wait for execution of both branches to complete. This is in contrast to CPU threads, where each thread would only have to execute the branch corresponding to whether <code>condition1</code> was true or false for that thread. The take home message from this section is to avoid heavily branching GPU code where possible, as it is possible each warp with have to wait for every branch to complete, dramatically slowing down your program.</p><footer><hr/><a class="previous" href="../Profiling/"><span class="direction">Previous</span><span class="title">Profiling</span></a><a class="next" href="../Further_Reading/"><span class="direction">Next</span><span class="title">Further Reading</span></a></footer></article></body></html>
